<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="monetag" content="82d151422eebfd582a09baed1158ba5f">

  <!-- popunder -->
  <script>(s=>{s.dataset.zone='9682172',s.src='https://al5sm.com/tag.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>

  <!-- vignate -->
  <script>(function(s){s.dataset.zone='9682221',s.src='https://gizokraijaw.net/vignette.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>

  <title>Videy</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.fluidplayer.com/v3/current/fluidplayer.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

  <style>
    body {
      background-color: #000;
      color: white;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      padding: 16px;
    }
    #video-container {
      width: 100%;
      max-width: 700px;
      background: #111;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 0 20px rgba(0,0,0,0.7);
    }
    #video-title {
      margin-top: 12px;
      font-size: 1rem;
      font-weight: bold;
      text-align: center;
    }
    #video-meta {
      text-align: center;
      color: #aaa;
      font-size: 0.9rem;
      margin-top: 4px;
      margin-bottom: 10px;
    }
    #download-btn {
      display: block;
      background: #00ff4c;
      color: #000;
      font-weight: bold;
      text-align: center;
      padding: 14px;
      border-radius: 6px;
      width: 250px;
      margin: 0 auto;
      text-decoration: none;
      transition: background 0.3s ease;
    }
    #download-btn:hover {
      background: #00d63c;
    }
    #error-message {
      color: red;
      text-align: center;
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <div id="video-container">
    <video id="video-player" controls preload="metadata"></video>
  </div>

  <div id="video-title">Memuat judul...</div>
  <div id="video-meta">
    <span id="video-duration">--:--:--</span> • 
    <span id="video-size">0 MB</span> • 
    <span id="video-date">-</span>
  </div>

  <a id="download-btn" href="#" download>⬇ Download</a>

  <div id="error-message" style="display:none;"></div>

  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      let urlPath = window.location.pathname;
      let videoId = '';
      if (urlPath.startsWith('/')) urlPath = urlPath.substring(1);
      if (urlPath.startsWith('e/')) videoId = urlPath.substring(2);
      else videoId = urlPath;

      const videoPlayer = document.getElementById('video-player');
      const videoTitle = document.getElementById('video-title');
      const videoMeta = {
        duration: document.getElementById('video-duration'),
        size: document.getElementById('video-size'),
        date: document.getElementById('video-date')
      };
      const downloadBtn = document.getElementById('download-btn');
      const errorMessage = document.getElementById('error-message');

      try {
        const response = await axios.get('https://raw.githubusercontent.com/DoodstreamPro/_e/refs/heads/main/Video.json');
        const videos = response.data;
        const foundVideo = videos.find(v => v.id === videoId);

        if (!foundVideo) {
          errorMessage.textContent = 'Video tidak ditemukan.';
          errorMessage.style.display = 'block';
          return;
        }

        // set video dan data
        videoPlayer.src = foundVideo.Url;
        videoTitle.textContent = foundVideo.Judul || 'Tanpa Judul';
        videoMeta.duration.textContent = foundVideo.Duration || '--:--:--';
        videoMeta.size.textContent = foundVideo.Size || '0 MB';
        videoMeta.date.textContent = foundVideo.Date || '-';
        downloadBtn.href = foundVideo.Url;

        fluidPlayer('video-player', {
          layoutControls: {
            fillToContainer: true,
            allowDownload: false,
            playButtonShowing: true,
            posterImage: foundVideo.PosterUrl || ""
          }
        });

      } catch (err) {
        errorMessage.textContent = 'Gagal mengambil data video.';
        errorMessage.style.display = 'block';
      }
    });
  </script>

</body>
</html>